<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DotGUI Search</title>

    <style>
      @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@100..900&display=swap');
      body {
        font-family: "Outfit", sans-serif;
        margin: 0;
        background: #0f0f0f;
        color: #eaeaea;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        text-align: center;
      }

      .header-center {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 20px;
      }

      #sj-address {
        background: #1a1a1a;
        font-family: inherit;
        padding: 0px 17px;
        height: 48px;
        border: 1px solid #333;
        color: #ffffff;
        border-radius: 50px;
        outline: none;
        width: 500px;
        transition: border-radius 0.1s, border 0.1s;
        font-size: 16px;
      }

      #sj-address::placeholder {
        color: #888;
      }

      #sj-address:focus {
        border: 1px solid #ffffff;
        border-radius: 8px;
      }

      .desc p {
        width: 560px;
        color: rgba(255, 255, 255, 0.6);
        margin: 0 auto;
      }
    </style>
  </head>

  <body>
    <div class="header-center">
      <img src="../media/2.png" alt="Logo" style="width: 200px" />
      <div style="font-size: 3rem; font-weight: bold">DotGUI Search</div>

      <form id="search-form">
        <input id="sj-address" type="text" placeholder="Search the web freely" />
      </form>

      <div class="desc">
        <p id="sj-error"></p>
      </div>
    </div>

    <script>
      const form = document.getElementById("search-form");
      const input = document.getElementById("sj-address");

      form.addEventListener("submit", (e) => {
        e.preventDefault();
        let query = input.value.trim();
        if (!query) return;

        // Check if it's a URL
        const urlPattern = /^[^\s]+\.[^\s]{2,}/i; // matches something like example.com
        if (/^https?:\/\//i.test(query)) {
          // already has protocol
          window.location.href = query;
        } else if (urlPattern.test(query)) {
          // add https:// if missing
          window.location.href = "https://" + query;
        } else {
          // treat as search query
          window.location.href = "https://www.duckduckgo.com/search?q=" + encodeURIComponent(query);
        }
      });

      input.addEventListener("keypress", (e) => {
        if (e.key === "Enter") form.dispatchEvent(new Event("submit"));
      });
    </script>
  </body>
</html>
